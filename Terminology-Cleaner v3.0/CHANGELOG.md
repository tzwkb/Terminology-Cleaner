# 📋 更新日志

## v2.1 (2025-10-17)

### ✨ 功能改进

- 🎯 **相似度阈值优化**：默认值从85%提升到90%，减少误判
- 🎨 **问题描述优化**：相似术语问题描述更清晰、更易读
- 📝 **文档重写**：全新设计的README，结构更清晰、内容更专业

### 🔧 技术改进

- ✅ **日志系统**：添加完整的日志管理模块（`logger.py`）
- ✅ **错误处理**：完善的异常处理和文件权限检查
- ✅ **语言检测**：改进中英混合术语的识别逻辑
- ✅ **代码质量**：代码清理、去重和优化

### 🐛 Bug修复

- 修复中英混合术语（如"INS/GNSS组合"）被误判为纯英文的问题
- 改进CSV文件编码自动检测（支持UTF-8, GBK, GB2312等）
- 优化文件读取错误提示

### 📦 新增文件

- `logger.py` - 日志管理模块
- `CHANGELOG.md` - 本文档

---

## v2.0 (2025-10)

### ✨ 核心功能

- 🤖 **相似术语检测**：混合AI技术（字符串+语义相似度）
- 🧠 **智能聚类**：Union-Find算法，传递性分组相似术语
- 🎨 **优化输出**：问题拆分为多列，添加组ID（G1, G2, S1, S2...）
- 📊 **改进报告**：更详细的统计信息和问题分类

### ⚡ 性能优化

- 批量编码：减少90%+ 模型调用
- GPU加速：自动使用CUDA（提速3-5倍）
- 快速预筛选：跳过77% 无效比较
- 内存优化：分批处理，支持万级数据集

### 🔧 技术实现

- 字符串相似度：`rapidfuzz`
- 语义相似度：`sentence-transformers`
- 向量化计算：`torch`
- 聚类算法：Union-Find

---

## v1.0 (2024)

### 🎉 初始版本

- 基础清洗功能
  - 空值检测
  - 重复检测
  - 译文一致性检测
- 翻译冲突检测
  - 一对多
  - 多对一
  - 互译检测
- 质量检查
  - 语言验证
  - 数字一致性
  - 长度检查
- 批量处理
- 详细报告生成

---

## 📊 版本对比

| 功能 | v1.0 | v2.0 | v2.1 |
|------|------|------|------|
| 基础清洗 | ✅ | ✅ | ✅ |
| 翻译冲突检测 | ✅ | ✅ | ✅ |
| 相似术语检测 | ❌ | ✅ | ✅ |
| 智能聚类 | ❌ | ✅ | ✅ |
| 优化输出格式 | ❌ | ✅ | ✅ |
| 性能优化 | ❌ | ✅ | ✅ |
| 日志系统 | ❌ | ❌ | ✅ |
| 错误处理 | 基础 | 基础 | 完善 |
| 相似度阈值 | N/A | 85% | 90% |

---

## 🚀 升级指南

### 从 v1.0 升级到 v2.1

1. **更新代码**：
   ```bash
   git pull origin main
   ```

2. **安装新依赖**：
   ```bash
   pip install -r requirements.txt
   ```

3. **配置调整**：
   - 相似度检测默认开启（可在配置中关闭）
   - 相似度阈值默认为90%（可调整）

4. **使用变化**：
   - 输出格式优化（问题拆分为多列）
   - 添加组ID列（方便筛选和审核）
   - 报告更详细

5. **性能提升**：
   - 万级数据集处理时间从30分钟降至5-8分钟
   - 支持GPU加速（自动检测）

### 兼容性

- ✅ **完全向后兼容**：v1.0的所有功能在v2.1中正常工作
- ✅ **输出格式**：cleaned文件格式不变，removed文件增加列
- ✅ **配置文件**：config.py新增字段，旧字段保持兼容

---

## 📝 已知问题

### v2.1

- 相似度检测对超大数据集（>20000条）处理较慢（建议分批或关闭）
- CSV文件编码检测在极少数情况下可能失败（需手动转换为UTF-8）

### 解决方案

1. **大数据集处理慢**：
   - 提高相似度阈值到95%
   - 关闭相似度检测：`config.similarity_check = False`
   - 启用GPU加速

2. **编码问题**：
   - 使用Excel转换CSV为UTF-8编码
   - 或使用在线工具转换编码

---

## 🤝 贡献者

感谢所有为本项目做出贡献的开发者！

**v2.1 主要贡献**：
- 日志系统设计和实现
- 语言检测算法改进
- 文档重写和优化
- Bug修复和测试

**v2.0 主要贡献**：
- 相似术语检测算法
- 性能优化实现
- Union-Find聚类算法
- 输出格式优化

**v1.0 主要贡献**：
- 核心清洗逻辑
- 翻译冲突检测
- 质量检查规则
- 批量处理功能

---

## 📧 反馈

如有问题或建议，请：
- 提交 Issue：[GitHub Issues](https://github.com/your-repo/issues)
- 参与讨论：[GitHub Discussions](https://github.com/your-repo/discussions)

---

<div align="center">

**持续改进中... 🚀**

Made with ❤️ for Translation Community

</div>
